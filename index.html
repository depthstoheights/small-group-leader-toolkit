<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Small Group Leader Toolkit</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #16a085 100%);
            min-height: 100vh;
            color: #2c3e50;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 100vw;
            min-height: 100vh;
            position: relative;
            padding-bottom: 80px;
        }

        /* Audio Toggle */
        .audio-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: linear-gradient(135deg, #16a085, #27ae60);
            border: none;
            border-radius: 12px;
            width: 55px;
            height: 55px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            color: white;
            font-size: 1.3em;
        }

        .audio-toggle:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.4);
        }

        /* Back Button */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #16a085;
            border-radius: 12px;
            width: 50px;
            height: 50px;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.4em;
            color: #16a085;
            font-weight: bold;
        }

        .back-button:hover {
            background: #16a085;
            color: white;
            transform: translateY(-3px);
        }

        .back-button.show {
            display: flex;
        }

        /* Welcome Screen */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            text-align: center;
            padding: 20px;
        }

        .welcome-content {
            background: rgba(255, 255, 255, 0.97);
            padding: 50px 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
            border-top: 5px solid #16a085;
        }

        .app-logo {
            font-size: 4em;
            color: #16a085;
            margin-bottom: 25px;
        }

        .app-title {
            font-size: 2.6em;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 700;
            line-height: 1.2;
        }

        .app-subtitle {
            font-size: 1.2em;
            color: #7f8c8d;
            margin-bottom: 35px;
            line-height: 1.6;
        }

        .enter-btn {
            background: linear-gradient(135deg, #16a085, #27ae60);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 12px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .enter-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.3);
        }

        /* Main App Screens */
        .screen {
            display: none;
            min-height: 100vh;
            padding: 80px 20px 100px 20px;
        }

        .screen.active {
            display: block;
        }

        /* Dashboard */
        .dashboard {
            max-width: 1200px;
            margin: 0 auto;
        }

        .dashboard-header {
            background: rgba(255, 255, 255, 0.97);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-top: 4px solid #16a085;
        }

        .header-title {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header-subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            margin-bottom: 25px;
        }

        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .stat-card {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .stat-number {
            font-size: 2.2em;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.97);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
            border-left-color: #16a085;
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-icon {
            font-size: 2.5em;
            margin-right: 15px;
            color: #16a085;
        }

        .card-title {
            font-size: 1.5em;
            color: #2c3e50;
            font-weight: 600;
            margin: 0;
        }

        .card-description {
            color: #7f8c8d;
            line-height: 1.6;
            font-size: 1.05em;
        }

        .card-badge {
            background: #16a085;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            margin-top: 15px;
            display: inline-block;
        }

        /* Content Screens */
        .content-container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.97);
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .content-header {
            background: linear-gradient(135deg, #16a085, #27ae60);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .content-title {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .content-subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content-body {
            padding: 30px;
        }

        /* Lesson Plans */
        .lesson-grid {
            display: grid;
            gap: 20px;
        }

        .lesson-card {
            border: 2px solid #ecf0f1;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .lesson-card:hover {
            border-color: #16a085;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .lesson-title {
            font-size: 1.4em;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .lesson-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .lesson-preview {
            color: #7f8c8d;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .lesson-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tag {
            background: #ecf0f1;
            color: #7f8c8d;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8em;
        }

        /* Detailed Views */
        .detailed-view {
            max-width: 800px;
            margin: 0 auto;
        }

        .section {
            background: rgba(255, 255, 255, 0.97);
            margin-bottom: 25px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .section-header {
            background: #16a085;
            color: white;
            padding: 15px 25px;
            font-weight: 600;
            font-size: 1.1em;
        }

        .section-content {
            padding: 25px;
        }

        .timeline {
            border-left: 3px solid #16a085;
            padding-left: 20px;
            margin-left: 10px;
        }

        .timeline-item {
            margin-bottom: 20px;
            position: relative;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -26px;
            top: 5px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #16a085;
        }

        .timeline-time {
            font-weight: 600;
            color: #16a085;
            margin-bottom: 5px;
        }

        .timeline-content {
            color: #2c3e50;
            line-height: 1.6;
        }

        /* Forms and Inputs */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: #16a085;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* Buttons */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
            text-decoration: none;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #16a085, #27ae60);
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn-secondary {
            background: #ecf0f1;
            color: #2c3e50;
            border: 2px solid #bdc3c7;
        }

        .btn-secondary:hover {
            background: #bdc3c7;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9em;
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .data-table th, .data-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        .data-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        /* Lists */
        .checklist {
            list-style: none;
        }

        .checklist li {
            padding: 10px 0;
            border-bottom: 1px solid #ecf0f1;
            position: relative;
            padding-left: 30px;
        }

        .checklist li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #27ae60;
            font-weight: bold;
        }

        /* Crisis Support */
        .crisis-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .crisis-alert {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .crisis-alert h2 {
            font-size: 2em;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .crisis-text {
            font-size: 1.2em;
            line-height: 1.6;
        }

        /* Resources Grid */
        .resource-grid {
            display: grid;
            gap: 20px;
            margin-top: 25px;
        }

        .resource-card {
            border: 2px solid #ecf0f1;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .resource-card:hover {
            border-color: #16a085;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .resource-title {
            font-size: 1.3em;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .resource-description {
            color: #7f8c8d;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .resource-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.97);
            backdrop-filter: blur(15px);
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            box-shadow: 0 -5px 25px rgba(0,0,0,0.15);
            z-index: 1000;
            border-top: 2px solid #16a085;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 10px;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 80px;
        }

        .nav-item:hover, .nav-item.active {
            background: linear-gradient(135deg, #16a085, #27ae60);
            color: white;
        }

        .nav-icon {
            font-size: 1.5em;
            margin-bottom: 5px;
            color: #16a085;
        }

        .nav-item:hover .nav-icon, .nav-item.active .nav-icon {
            color: white;
        }

        .nav-label {
            font-size: 0.8em;
            color: #2c3e50;
            font-weight: 600;
        }

        .nav-item:hover .nav-label, .nav-item.active .nav-label {
            color: white;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            position: relative;
            border-top: 4px solid #16a085;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.8em;
            cursor: pointer;
            color: #7f8c8d;
        }

        .modal-close:hover {
            color: #16a085;
        }

        .modal-title {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #2c3e50;
            font-weight: 700;
        }

        .modal-text {
            line-height: 1.6;
            color: #7f8c8d;
            margin-bottom: 15px;
        }

        .donate-btn {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            margin: 15px 0;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .donate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Success Messages */
        .success-message {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .success-message.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .welcome-content {
                padding: 35px 25px;
                margin: 20px;
            }

            .header-title {
                font-size: 2em;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .content-body {
                padding: 20px;
            }

            .lesson-meta {
                flex-direction: column;
                gap: 5px;
            }

            .resource-actions {
                flex-direction: column;
            }

            .data-table {
                font-size: 0.9em;
            }

            .bottom-nav {
                padding: 10px 0;
            }

            .nav-icon {
                font-size: 1.3em;
            }

            .nav-label {
                font-size: 0.7em;
            }
        }

        @media (max-width: 480px) {
            .screen {
                padding: 70px 15px 90px 15px;
            }

            .content-container {
                margin: 10px;
            }

            .content-header, .content-body {
                padding: 20px;
            }

            .modal-content {
                margin: 10px;
                padding: 20px;
            }

            .quick-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Audio Toggle -->
        <button class="audio-toggle" onclick="toggleAudio()" id="audioToggle">
            🎵
        </button>

        <!-- Back Button -->
        <button class="back-button" onclick="goBack()" id="backButton">
            ←
        </button>

        <!-- Background Audio -->
        <audio id="backgroundAudio" loop>
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBTmX2+/TfCMEKoHU8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwGJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBTmX2+/TfCMEKoHU8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwGJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBTmX2+/TfCMEKoHU8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwGJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBTmX2+/TfCMEKoHU8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwGJHfH8N2QQAoUXrTp66hVFApGn+D2u2IdBTmX2+/TfCMEKoHU8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwGJHfH8N2QQAoUXrTp66hVFApGn+D2u2Id" type="audio/wav">
        </audio>

        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="welcome-screen">
            <div class="welcome-content">
                <div class="app-logo">👥</div>
                <h1 class="app-title">Small Group Leader Toolkit</h1>
                <p class="app-subtitle">Everything you need to lead with confidence: lesson plans, icebreakers, prayer tracking, and accountability tools</p>
                <button class="enter-btn" onclick="enterApp()">Start Leading</button>
            </div>
        </div>

        <!-- Home Dashboard -->
        <div id="homeScreen" class="screen">
            <div class="dashboard">
                <div class="dashboard-header">
                    <h1 class="header-title">Leadership Dashboard</h1>
                    <p class="header-subtitle">Your complete toolkit for effective small group leadership</p>
                    
                    <div class="quick-stats">
                        <div class="stat-card">
                            <span class="stat-number" id="groupMembers">8</span>
                            <span class="stat-label">Group Members</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="lessonsCompleted">12</span>
                            <span class="stat-label">Lessons Completed</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="prayerRequests">15</span>
                            <span class="stat-label">Active Prayers</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" id="weeklyAttendance">75%</span>
                            <span class="stat-label">Avg Attendance</span>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card" onclick="showScreen('lessonPlans')">
                        <div class="card-header">
                            <div class="card-icon">📖</div>
                            <h3 class="card-title">Lesson Plans</h3>
                        </div>
                        <p class="card-description">Ready-made Bible study outlines with discussion questions, activities, and teaching notes</p>
                        <span class="card-badge">25+ Lessons</span>
                    </div>

                    <div class="dashboard-card" onclick="showScreen('icebreakers')">
                        <div class="card-header">
                            <div class="card-icon">🎯</div>
                            <h3 class="card-title">Icebreakers</h3>
                        </div>
                        <p class="card-description">Fun conversation starters and activities to build connections and break the ice</p>
                        <span class="card-badge">50+ Activities</span>
                    </div>

                    <div class="dashboard-card" onclick="showScreen('prayerTracker')">
                        <div class="card-header">
                            <div class="card-icon">🙏</div>
                            <h3 class="card-title">Prayer Tracker</h3>
                        </div>
                        <p class="card-description">Track prayer requests, answered prayers, and prayer points for your group members</p>
                        <span class="card-badge">Live Updates</span>
                    </div>

                    <div class="dashboard-card" onclick="showScreen('accountability')">
                        <div class="card-header">
                            <div class="card-icon">🤝</div>
                            <h3 class="card-title">Accountability Tools</h3>
                        </div>
                        <p class="card-description">Goal setting, check-ins, and progress tracking for spiritual growth</p>
                        <span class="card-badge">Growth Focused</span>
                    </div>

                    <div class="dashboard-card" onclick="showScreen('groupProgress')">
                        <div class="card-header">
                            <div class="card-icon">📊</div>
                            <h3 class="card-title">Group Progress</h3>
                        </div>
                        <p class="card-description">Attendance tracking, engagement metrics, and group health indicators</p>
                        <span class="card-badge">Analytics</span>
                    </div>

                    <div class="dashboard-card" onclick="showScreen('leadershipTips')">
                        <div class="card-header">
                            <div class="card-icon">💡</div>
                            <h3 class="card-title">Leadership Tips</h3>
                        </div>
                        <p class="card-description">Practical advice, troubleshooting guides, and best practices for new leaders</p>
                        <span class="card-badge">Expert Advice</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lesson Plans Screen -->
        <div id="lessonPlans" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Lesson Plans</h2>
                    <p class="content-subtitle">Ready-made Bible study outlines for effective group discussions</p>
                </div>
                <div class="content-body">
                    <div class="lesson-grid">
                        <div class="lesson-card" onclick="openLesson('faith')">
                            <div class="lesson-title">Faith in Action</div>
                            <div class="lesson-meta">
                                <span>📖 James 2:14-26</span>
                                <span>⏱️ 45-60 min</span>
                                <span>👥 6-12 people</span>
                            </div>
                            <div class="lesson-preview">Explore how genuine faith naturally produces good works and how our actions demonstrate our beliefs...</div>
                            <div class="lesson-tags">
                                <span class="tag">Faith</span>
                                <span class="tag">Action</span>
                                <span class="tag">Beginner</span>
                            </div>
                        </div>

                        <div class="lesson-card" onclick="openLesson('love')">
                            <div class="lesson-title">Love One Another</div>
                            <div class="lesson-meta">
                                <span>📖 1 John 4:7-21</span>
                                <span>⏱️ 50-65 min</span>
                                <span>👥 4-10 people</span>
                            </div>
                            <div class="lesson-preview">Dive deep into God's love for us and how that transforms our relationships with others...</div>
                            <div class="lesson-tags">
                                <span class="tag">Love</span>
                                <span class="tag">Relationships</span>
                                <span class="tag">Intermediate</span>
                            </div>
                        </div>

                        <div class="lesson-card" onclick="openLesson('forgiveness')">
                            <div class="lesson-title">The Power of Forgiveness</div>
                            <div class="lesson-meta">
                                <span>📖 Matthew 6:9-15</span>
                                <span>⏱️ 60-75 min</span>
                                <span>👥 6-15 people</span>
                            </div>
                            <div class="lesson-preview">Understand God's forgiveness toward us and learn practical steps for forgiving others...</div>
                            <div class="lesson-tags">
                                <span class="tag">Forgiveness</span>
                                <span class="tag">Healing</span>
                                <span class="tag">Advanced</span>
                            </div>
                        </div>

                        <div class="lesson-card" onclick="openLesson('purpose')">
                            <div class="lesson-title">Living with Purpose</div>
                            <div class="lesson-meta">
                                <span>📖 Ephesians 2:8-10</span>
                                <span>⏱️ 45-60 min</span>
                                <span>👥 5-12 people</span>
                            </div>
                            <div class="lesson-preview">Discover God's purpose for your life and how to walk in the good works He has prepared...</div>
                            <div class="lesson-tags">
                                <span class="tag">Purpose</span>
                                <span class="tag">Calling</span>
                                <span class="tag">Beginner</span>
                            </div>
                        </div>

                        <div class="lesson-card" onclick="openLesson('prayer')">
                            <div class="lesson-title">The Practice of Prayer</div>
                            <div class="lesson-meta">
                                <span>📖 Luke 11:1-13</span>
                                <span>⏱️ 55-70 min</span>
                                <span>👥 4-10 people</span>
                            </div>
                            <div class="lesson-preview">Learn from Jesus' teaching on prayer and develop a deeper prayer life...</div>
                            <div class="lesson-tags">
                                <span class="tag">Prayer</span>
                                <span class="tag">Spiritual Growth</span>
                                <span class="tag">Intermediate</span>
                            </div>
                        </div>

                        <div class="lesson-card" onclick="openLesson('community')">
                            <div class="lesson-title">Life in Community</div>
                            <div class="lesson-meta">
                                <span>📖 Acts 2:42-47</span>
                                <span>⏱️ 50-65 min</span>
                                <span>👥 6-15 people</span>
                            </div>
                            <div class="lesson-preview">Explore the early church model and how to build authentic Christian community...</div>
                            <div class="lesson-tags">
                                <span class="tag">Community</span>
                                <span class="tag">Fellowship</span>
                                <span class="tag">Beginner</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detailed Lesson View -->
        <div id="lessonDetail" class="screen">
            <div class="detailed-view">
                <div class="section">
                    <div class="section-header">Lesson Overview</div>
                    <div class="section-content">
                        <h3 id="detailTitle">Faith in Action</h3>
                        <p id="detailDescription">This lesson explores the relationship between faith and works as described in James 2:14-26. Participants will understand that genuine faith naturally produces good works and learn how to live out their faith in practical ways.</p>
                        
                        <div style="margin-top: 20px;">
                            <strong>Scripture:</strong> <span id="detailScripture">James 2:14-26</span><br>
                            <strong>Duration:</strong> <span id="detailDuration">45-60 minutes</span><br>
                            <strong>Group Size:</strong> <span id="detailSize">6-12 people</span>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-header">Lesson Timeline</div>
                    <div class="section-content">
                        <div class="timeline">
                            <div class="timeline-item">
                                <div class="timeline-time">5 min</div>
                                <div class="timeline-content"><strong>Opening Prayer & Welcome</strong><br>Begin with prayer and welcome any new members</div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-time">10 min</div>
                                <div class="timeline-content"><strong>Icebreaker Activity</strong><br>"Share about a time someone's actions spoke louder than their words"</div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-time">15 min</div>
                                <div class="timeline-content"><strong>Scripture Reading & Context</strong><br>Read James 2:14-26 and provide historical context</div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-time">20 min</div>
                                <div class="timeline-content"><strong>Discussion Questions</strong><br>Guided discussion using prepared questions</div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-time">10 min</div>
                                <div class="timeline-content"><strong>Application & Commitment</strong><br>Personal reflection and practical application</div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-time">5 min</div>
                                <div class="timeline-content"><strong>Prayer & Closing</strong><br>Group prayer and announcements</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-header">Discussion Questions</div>
                    <div class="section-content">
                        <ol style="line-height: 1.8; color: #2c3e50;">
                            <li><strong>Opening:</strong> What comes to mind when you hear "faith without works is dead"?</li>
                            <li><strong>Understanding:</strong> According to James, what is the relationship between faith and works?</li>
                            <li><strong>Examples:</strong> How do Abraham and Rahab demonstrate living faith? What made their faith "complete"?</li>
                            <li><strong>Personal:</strong> Can you think of a time when your actions demonstrated your faith to others?</li>
                            <li><strong>Challenge:</strong> What is one practical way you can "show" your faith this week?</li>
                            <li><strong>Application:</strong> How can our group encourage each other to live out our faith in action?</li>
                        </ol>
                    </div>
                </div>

                <div class="section">
                    <div class="section-header">Leader Notes</div>
                    <div class="section-content">
                        <ul class="checklist">
                            <li>Emphasize that works don't earn salvation, but are evidence of genuine faith</li>
                            <li>Be prepared for questions about the apparent contradiction with Paul's teaching on grace</li>
                            <li>Encourage practical, specific commitments rather than vague promises</li>
                            <li>Share a personal example of faith in action from your own life</li>
                            <li>Create a safe space for people to admit struggles with living out their faith</li>
                            <li>End with concrete ways the group can serve together</li>
                        </ul>
                    </div>
                </div>

                <div class="section">
                    <div class="section-header">Materials Needed</div>
                    <div class="section-content">
                        <ul style="line-height: 1.8; color: #2c3e50;">
                            <li>Bibles for each participant</li>
                            <li>Printed discussion questions (optional)</li>
                            <li>Whiteboard or flip chart for notes</li>
                            <li>Prayer request cards</li>
                            <li>Refreshments (if applicable)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Icebreakers Screen -->
        <div id="icebreakers" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Icebreakers & Activities</h2>
                    <p class="content-subtitle">Fun ways to build connections and create comfortable group dynamics</p>
                </div>
                <div class="content-body">
                    <div class="resource-grid">
                        <div class="resource-card">
                            <div class="resource-title">Getting to Know You</div>
                            <div class="resource-description">Perfect for new groups or when introducing new members</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showIcebreaker('gettingToKnow')">View Activities</button>
                            </div>
                        </div>

                        <div class="resource-card">
                            <div class="resource-title">Conversation Starters</div>
                            <div class="resource-description">Thought-provoking questions to spark meaningful discussions</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showIcebreaker('conversation')">View Questions</button>
                            </div>
                        </div>

                        <div class="resource-card">
                            <div class="resource-title">Active Games</div>
                            <div class="resource-description">Physical activities and games for energetic groups</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showIcebreaker('activeGames')">View Games</button>
                            </div>
                        </div>

                        <div class="resource-card">
                            <div class="resource-title">Creative Activities</div>
                            <div class="resource-description">Artistic and creative icebreakers for expression and fun</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showIcebreaker('creative')">View Activities</button>
                            </div>
                        </div>

                        <div class="resource-card">
                            <div class="resource-title">Faith-Based Icebreakers</div>
                            <div class="resource-description">Activities that naturally lead into spiritual conversations</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showIcebreaker('faithBased')">View Activities</button>
                            </div>
                        </div>

                        <div class="resource-card">
                            <div class="resource-title">Quick & Easy</div>
                            <div class="resource-description">5-minute activities for tight schedules or transitions</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showIcebreaker('quickEasy')">View Activities</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Prayer Tracker Screen -->
        <div id="prayerTracker" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Prayer Tracker</h2>
                    <p class="content-subtitle">Keep track of prayer requests and celebrate answered prayers</p>
                </div>
                <div class="content-body">
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="addPrayerRequest()">Add New Prayer Request</button>
                    </div>

                    <div class="section">
                        <div class="section-header">Active Prayer Requests</div>
                        <div class="section-content">
                            <table class="data-table" id="prayerTable">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Person</th>
                                        <th>Request</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Dec 15</td>
                                        <td>Sarah M.</td>
                                        <td>Job interview on Friday</td>
                                        <td><span style="background: #f39c12; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">Ongoing</span></td>
                                        <td>
                                            <button class="btn btn-secondary btn-small" onclick="markAnswered('prayer1')">Mark Answered</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Dec 12</td>
                                        <td>Mike T.</td>
                                        <td>Healing for his father's surgery</td>
                                        <td><span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">Answered</span></td>
                                        <td>
                                            <button class="btn btn-secondary btn-small" onclick="viewDetails('prayer2')">Details</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Dec 10</td>
                                        <td>Lisa K.</td>
                                        <td>Wisdom in parenting challenges</td>
                                        <td><span style="background: #f39c12; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">Ongoing</span></td>
                                        <td>
                                            <button class="btn btn-secondary btn-small" onclick="markAnswered('prayer3')">Mark Answered</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Prayer Statistics</div>
                        <div class="section-content">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px;">
                                <div style="text-align: center; background: #3498db; color: white; padding: 20px; border-radius: 10px;">
                                    <div style="font-size: 2em; font-weight: bold;">15</div>
                                    <div style="font-size: 0.9em;">Total Requests</div>
                                </div>
                                <div style="text-align: center; background: #27ae60; color: white; padding: 20px; border-radius: 10px;">
                                    <div style="font-size: 2em; font-weight: bold;">8</div>
                                    <div style="font-size: 0.9em;">Answered</div>
                                </div>
                                <div style="text-align: center; background: #f39c12; color: white; padding: 20px; border-radius: 10px;">
                                    <div style="font-size: 2em; font-weight: bold;">7</div>
                                    <div style="font-size: 0.9em;">Ongoing</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Accountability Screen -->
        <div id="accountability" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Accountability Tools</h2>
                    <p class="content-subtitle">Help your group members grow through goal setting and regular check-ins</p>
                </div>
                <div class="content-body">
                    <div class="section">
                        <div class="section-header">Group Goals</div>
                        <div class="section-content">
                            <div class="form-group">
                                <button class="btn btn-primary" onclick="setGroupGoal()">Set New Group Goal</button>
                            </div>
                            
                            <div style="margin-top: 20px;">
                                <h4>Current Goals:</h4>
                                <div class="resource-card" style="margin-top: 15px;">
                                    <div class="resource-title">Scripture Memory Challenge</div>
                                    <div class="resource-description">Memorize one verse per week for the next 8 weeks</div>
                                    <div style="margin: 15px 0;">
                                        <div style="background: #ecf0f1; height: 10px; border-radius: 5px; overflow: hidden;">
                                            <div style="background: #27ae60; height: 100%; width: 62.5%;"></div>
                                        </div>
                                        <small style="color: #7f8c8d;">5 of 8 weeks completed</small>
                                    </div>
                                    <div class="resource-actions">
                                        <button class="btn btn-secondary btn-small" onclick="updateProgress('goal1')">Update Progress</button>
                                    </div>
                                </div>

                                <div class="resource-card" style="margin-top: 15px;">
                                    <div class="resource-title">Daily Devotion Practice</div>
                                    <div class="resource-description">Commit to 15 minutes of daily Bible reading and prayer</div>
                                    <div style="margin: 15px 0;">
                                        <div style="background: #ecf0f1; height: 10px; border-radius: 5px; overflow: hidden;">
                                            <div style="background: #f39c12; height: 100%; width: 78%;"></div>
                                        </div>
                                        <small style="color: #7f8c8d;">78% completion rate this month</small>
                                    </div>
                                    <div class="resource-actions">
                                        <button class="btn btn-secondary btn-small" onclick="updateProgress('goal2')">Update Progress</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Individual Check-ins</div>
                        <div class="section-content">
                            <p style="margin-bottom: 20px; color: #7f8c8d;">Track personal spiritual growth and accountability with group members</p>
                            
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Member</th>
                                        <th>Last Check-in</th>
                                        <th>Focus Area</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Sarah M.</td>
                                        <td>Dec 18</td>
                                        <td>Prayer Life</td>
                                        <td><span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">On Track</span></td>
                                        <td><button class="btn btn-secondary btn-small" onclick="scheduleCheckIn('sarah')">Schedule</button></td>
                                    </tr>
                                    <tr>
                                        <td>Mike T.</td>
                                        <td>Dec 15</td>
                                        <td>Scripture Study</td>
                                        <td><span style="background: #f39c12; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">Needs Support</span></td>
                                        <td><button class="btn btn-secondary btn-small" onclick="scheduleCheckIn('mike')">Schedule</button></td>
                                    </tr>
                                    <tr>
                                        <td>Lisa K.</td>
                                        <td>Dec 16</td>
                                        <td>Service Opportunities</td>
                                        <td><span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">Excelling</span></td>
                                        <td><button class="btn btn-secondary btn-small" onclick="scheduleCheckIn('lisa')">Schedule</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Accountability Questions</div>
                        <div class="section-content">
                            <p style="margin-bottom: 15px; color: #7f8c8d;">Use these questions during one-on-one check-ins:</p>
                            <ul style="line-height: 1.8; color: #2c3e50;">
                                <li>How has your relationship with God grown this week?</li>
                                <li>What challenges are you facing in your spiritual life?</li>
                                <li>How can I pray for you specifically this week?</li>
                                <li>What is God teaching you through His word lately?</li>
                                <li>How are you applying what we've learned in group to your daily life?</li>
                                <li>Is there any area where you need encouragement or support?</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Group Progress Screen -->
        <div id="groupProgress" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Group Progress</h2>
                    <p class="content-subtitle">Track attendance, engagement, and overall group health</p>
                </div>
                <div class="content-body">
                    <div class="section">
                        <div class="section-header">Attendance Tracking</div>
                        <div class="section-content">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                                <div style="text-align: center; background: #3498db; color: white; padding: 20px; border-radius: 10px;">
                                    <div style="font-size: 2.5em; font-weight: bold;">75%</div>
                                    <div style="font-size: 0.9em;">Average Attendance</div>
                                </div>
                                <div style="text-align: center; background: #27ae60; color: white; padding: 20px; border-radius: 10px;">
                                    <div style="font-size: 2.5em; font-weight: bold;">8</div>
                                    <div style="font-size: 0.9em;">Regular Members</div>
                                </div>
                                <div style="text-align: center; background: #f39c12; color: white; padding: 20px; border-radius: 10px;">
                                    <div style="font-size: 2.5em; font-weight: bold;">12</div>
                                    <div style="font-size: 0.9em;">Weeks Running</div>
                                </div>
                            </div>

                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Lesson Topic</th>
                                        <th>Attendance</th>
                                        <th>Engagement</th>
                                        <th>Notes</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Dec 18</td>
                                        <td>Faith in Action</td>
                                        <td>6/8 (75%)</td>
                                        <td><span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">High</span></td>
                                        <td>Great discussion, lots of participation</td>
                                    </tr>
                                    <tr>
                                        <td>Dec 11</td>
                                        <td>Love One Another</td>
                                        <td>7/8 (88%)</td>
                                        <td><span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">High</span></td>
                                        <td>Emotional sharing, strong connections</td>
                                    </tr>
                                    <tr>
                                        <td>Dec 4</td>
                                        <td>The Power of Forgiveness</td>
                                        <td>5/8 (63%)</td>
                                        <td><span style="background: #f39c12; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">Medium</span></td>
                                        <td>Heavy topic, some members absent</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Member Engagement</div>
                        <div class="section-content">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Member</th>
                                        <th>Attendance Rate</th>
                                        <th>Participation Level</th>
                                        <th>Growth Areas</th>
                                        <th>Notes</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Sarah M.</td>
                                        <td>92%</td>
                                        <td><span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">Active</span></td>
                                        <td>Leadership development</td>
                                        <td>Natural encourager, helps facilitate</td>
                                    </tr>
                                    <tr>
                                        <td>Mike T.</td>
                                        <td>83%</td>
                                        <td><span style="background: #f39c12; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">Moderate</span></td>
                                        <td>Opening up more</td>
                                        <td>Introverted but growing in confidence</td>
                                    </tr>
                                    <tr>
                                        <td>Lisa K.</td>
                                        <td>75%</td>
                                        <td><span style="background: #27ae60; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8em;">Active</span></td>
                                        <td>Practical application</td>
                                        <td>Great at asking thoughtful questions</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Group Health Indicators</div>
                        <div class="section-content">
                            <div style="display: grid; gap: 20px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                    <span style="font-weight: 600;">Community Building</span>
                                    <div style="display: flex; gap: 5px;">
                                        <span style="color: #27ae60; font-size: 1.5em;">★★★★★</span>
                                    </div>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                    <span style="font-weight: 600;">Spiritual Growth</span>
                                    <div style="display: flex; gap: 5px;">
                                        <span style="color: #27ae60; font-size: 1.5em;">★★★★</span><span style="color: #ecf0f1; font-size: 1.5em;">★</span>
                                    </div>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                    <span style="font-weight: 600;">Leadership Development</span>
                                    <div style="display: flex; gap: 5px;">
                                        <span style="color: #27ae60; font-size: 1.5em;">★★★</span><span style="color: #ecf0f1; font-size: 1.5em;">★★</span>
                                    </div>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                    <span style="font-weight: 600;">Outreach & Service</span>
                                    <div style="display: flex; gap: 5px;">
                                        <span style="color: #f39c12; font-size: 1.5em;">★★</span><span style="color: #ecf0f1; font-size: 1.5em;">★★★</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leadership Tips Screen -->
        <div id="leadershipTips" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Leadership Tips</h2>
                    <p class="content-subtitle">Practical advice and best practices for effective small group leadership</p>
                </div>
                <div class="content-body">
                    <div class="resource-grid">
                        <div class="resource-card">
                            <div class="resource-title">Getting Started</div>
                            <div class="resource-description">Essential tips for new leaders launching their first small group</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showTips('gettingStarted')">View Tips</button>
                            </div>
                        </div>

                        <div class="resource-card">
                            <div class="resource-title">Facilitating Discussion</div>
                            <div class="resource-description">How to lead engaging conversations and handle difficult situations</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showTips('facilitating')">View Tips</button>
                            </div>
                        </div>

                        <div class="resource-card">
                            <div class="resource-title">Building Community</div>
                            <div class="resource-description">Strategies for creating authentic relationships and group cohesion</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showTips('community')">View Tips</button>
                            </div>
                        </div>

                        <div class="resource-card">
                            <div class="resource-title">Handling Challenges</div>
                            <div class="resource-description">Troubleshooting common problems and difficult group dynamics</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showTips('challenges')">View Tips</button>
                            </div>
                        </div>

                        <div class="resource-card">
                            <div class="resource-title">Spiritual Growth</div>
                            <div class="resource-description">Helping group members grow deeper in their faith and relationship with God</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showTips('spiritualGrowth')">View Tips</button>
                            </div>
                        </div>

                        <div class="resource-card">
                            <div class="resource-title">Leadership Development</div>
                            <div class="resource-description">Growing as a leader and developing other leaders within your group</div>
                            <div class="resource-actions">
                                <button class="btn btn-primary btn-small" onclick="showTips('leadershipDev')">View Tips</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Crisis Support Screen -->
        <div id="crisisScreen" class="screen">
            <div class="crisis-container">
                <div class="crisis-alert">
                    <h2>🆘 Leadership Crisis Support</h2>
                    <div class="crisis-text">
                        If you are in crisis, please contact your local helpline for immediate support.
                        Leadership can be challenging - you're not alone in this journey.
                    </div>
                </div>

                <div class="resource-grid">
                    <div class="resource-card">
                        <div class="resource-title">When You Feel Overwhelmed</div>
                        <div class="resource-description">"Come to me, all you who are weary and burdened, and I will give you rest." - Matthew 11:28</div>
                        <div class="resource-actions">
                            <button class="btn btn-secondary btn-small" onclick="showCrisisHelp('overwhelmed')">Get Help</button>
                        </div>
                    </div>

                    <div class="resource-card">
                        <div class="resource-title">When You Feel Inadequate</div>
                        <div class="resource-description">"I can do all this through him who gives me strength." - Philippians 4:13</div>
                        <div class="resource-actions">
                            <button class="btn btn-secondary btn-small" onclick="showCrisisHelp('inadequate')">Find Strength</button>
                        </div>
                    </div>

                    <div class="resource-card">
                        <div class="resource-title">When Group Dynamics are Difficult</div>
                        <div class="resource-description">"Bear with each other and forgive one another if any of you has a grievance against someone." - Colossians 3:13</div>
                        <div class="resource-actions">
                            <button class="btn btn-secondary btn-small" onclick="showCrisisHelp('dynamics')">Get Guidance</button>
                        </div>
                    </div>

                    <div class="resource-card">
                        <div class="resource-title">When You Need Wisdom</div>
                        <div class="resource-description">"If any of you lacks wisdom, you should ask God, who gives generously to all without finding fault." - James 1:5</div>
                        <div class="resource-actions">
                            <button class="btn btn-secondary btn-small" onclick="showCrisisHelp('wisdom')">Seek Wisdom</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resources Screen -->
        <div id="resourcesScreen" class="screen">
            <div class="content-container">
                <div class="content-header">
                    <h2 class="content-title">Leadership Resources</h2>
                    <p class="content-subtitle">Additional tools and materials for effective small group leadership</p>
                </div>
                <div class="content-body">
                    <div class="section">
                        <div class="section-header">Quick Reference Guides</div>
                        <div class="section-content">
                            <div class="resource-grid">
                                <div class="resource-card">
                                    <div class="resource-title">First Meeting Checklist</div>
                                    <div class="resource-description">Everything you need to prepare for your group's first gathering</div>
                                    <div class="resource-actions">
                                        <button class="btn btn-primary btn-small" onclick="showResource('firstMeeting')">View Checklist</button>
                                    </div>
                                </div>

                                <div class="resource-card">
                                    <div class="resource-title">Discussion Question Bank</div>
                                    <div class="resource-description">100+ questions for any Bible passage or topic</div>
                                    <div class="resource-actions">
                                        <button class="btn btn-primary btn-small" onclick="showResource('questionBank')">Browse Questions</button>
                                    </div>
                                </div>

                                <div class="resource-card">
                                    <div class="resource-title">Group Covenant Template</div>
                                    <div class="resource-description">Establish clear expectations and commitments</div>
                                    <div class="resource-actions">
                                        <button class="btn btn-primary btn-small" onclick="showResource('covenant')">Download Template</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Training Materials</div>
                        <div class="section-content">
                            <ul class="checklist">
                                <li>Small Group Leadership 101 - Basic principles and practices</li>
                                <li>Creating Safe Spaces - Building trust and vulnerability</li>
                                <li>Conflict Resolution - Handling disagreements gracefully</li>
                                <li>Spiritual Formation - Guiding others in their faith journey</li>
                                <li>Multiplication Strategies - Growing and reproducing groups</li>
                                <li>Pastoral Care Basics - Supporting members through difficulties</li>
                            </ul>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Contact & Support</div>
                        <div class="section-content">
                            <p style="margin-bottom: 15px; color: #7f8c8d;">Need additional help or have questions? We're here to support your leadership journey.</p>
                            <div class="resource-actions">
                                <button class="btn btn-primary" onclick="contactSupport()">Contact Support Team</button>
                                <button class="btn btn-secondary" onclick="findMentor()">Find a Mentor</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Info Modal -->
        <div id="infoModal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal('infoModal')">×</button>
                <h2 class="modal-title">📱 App Information</h2>
                
                <div class="modal-text">
                    <strong>What this app does:</strong><br>
                    Small Group Leader Toolkit provides comprehensive resources for new and young leaders including lesson plans, icebreakers, prayer tracking, accountability tools, and group progress monitoring.
                </div>

                <div class="modal-text">
                    <strong>How to use:</strong><br>
                    • Browse ready-made lesson plans with detailed outlines<br>
                    • Use icebreakers to build group connections<br>
                    • Track prayer requests and celebrate answers<br>
                    • Set accountability goals and monitor progress<br>
                    • Analyze group health and attendance patterns<br>
                    • Access leadership tips and crisis support
                </div>

                <div class="modal-text">
                    <strong>Install on your phone:</strong><br>
                    📱 <strong>iPhone:</strong> Tap Share → Add to Home Screen<br>
                    📱 <strong>Android:</strong> Tap Menu → Add to Home Screen
                </div>

                <div class="modal-text">
                    <strong>Features:</strong><br>
                    • 25+ complete lesson plans with timelines<br>
                    • 50+ icebreaker activities<br>
                    • Prayer request tracking system<br>
                    • Accountability and goal-setting tools<br>
                    • Attendance and engagement analytics<br>
                    • Leadership development resources
                </div>

                <div class="modal-text">
                    This app works offline and saves your group data locally on your device.
                </div>
            </div>
        </div>

        <!-- About Modal -->
        <div id="aboutModal" class="modal">
            <div class="modal-content">
                <button class="modal-close" onclick="closeModal('aboutModal')">×</button>
                <h2 class="modal-title">ℹ️ About</h2>
                
                <div class="modal-text">
                    <strong>Made by Justin</strong><br>
                    Depths to Heights
                </div>

                <div class="modal-text">
                    <strong>Website:</strong><br>
                    <a href="https://depthstoheights.org" target="_blank" style="color: #16a085;">https://depthstoheights.org</a>
                </div>

                <div class="modal-text">
                    <strong>Contact:</strong><br>
                    <a href="mailto:depthstoheights@gmail.com" style="color: #16a085;">depthstoheights@gmail.com</a>
                </div>

                <button class="donate-btn" onclick="window.open('https://www.paypal.com/donate/?hosted_button_id=8GRE7B8C3TP2U', '_blank')">
                    💝 Donate via PayPal
                </button>

                <div class="modal-text">
                    <strong>Our Mission:</strong><br>
                    We create digital tools to support spiritual growth, leadership development, and faith-based community building. Our apps equip leaders with practical resources to facilitate meaningful connections and spiritual transformation in small group settings.
                </div>

                <div class="modal-text">
                    <strong>Leadership Philosophy:</strong><br>
                    We believe that effective small group leadership comes from a combination of spiritual maturity, practical skills, and genuine care for people. This toolkit provides the resources new leaders need to grow in confidence and effectiveness.
                </div>

                <div class="modal-text" style="font-size: 0.9em; color: #999;">
                    Version 1.0 | © 2024 Depths to Heights
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item active" onclick="showScreen('homeScreen')">
                <div class="nav-icon">🏠</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" onclick="showScreen('crisisScreen')">
                <div class="nav-icon">🆘</div>
                <div class="nav-label">Crisis</div>
            </div>
            <div class="nav-item" onclick="showScreen('resourcesScreen')">
                <div class="nav-icon">📚</div>
                <div class="nav-label">Resources</div>
            </div>
            <div class="nav-item" onclick="showModal('infoModal')">
                <div class="nav-icon">ℹ️</div>
                <div class="nav-label">Info</div>
            </div>
            <div class="nav-item" onclick="showModal('aboutModal')">
                <div class="nav-icon">👤</div>
                <div class="nav-label">About</div>
            </div>
        </nav>
    </div>

    <script>
        // App State
        let appData = {
            groupMembers: 8,
            lessonsCompleted: 12,
            prayerRequests: 15,
            weeklyAttendance: 75,
            currentLesson: null,
            prayerList: [
                { id: 'prayer1', date: 'Dec 15', person: 'Sarah M.', request: 'Job interview on Friday', status: 'ongoing' },
                { id: 'prayer2', date: 'Dec 12', person: 'Mike T.', request: 'Healing for his father\'s surgery', status: 'answered' },
                { id: 'prayer3', date: 'Dec 10', person: 'Lisa K.', request: 'Wisdom in parenting challenges', status: 'ongoing' }
            ],
            groupGoals: [
                { id: 'goal1', title: 'Scripture Memory Challenge', progress: 62.5 },
                { id: 'goal2', title: 'Daily Devotion Practice', progress: 78 }
            ]
        };

        let currentScreen = 'homeScreen';
        let screenHistory = [];

        // Lesson Plans Data
        const lessonPlans = {
            faith: {
                title: "Faith in Action",
                scripture: "James 2:14-26",
                duration: "45-60 minutes",
                size: "6-12 people",
                description: "This lesson explores the relationship between faith and works as described in James 2:14-26. Participants will understand that genuine faith naturally produces good works and learn how to live out their faith in practical ways."
            },
            love: {
                title: "Love One Another",
                scripture: "1 John 4:7-21",
                duration: "50-65 minutes",
                size: "4-10 people",
                description: "Dive deep into God's love for us and how that transforms our relationships with others. Explore practical ways to demonstrate Christ's love in daily interactions."
            },
            forgiveness: {
                title: "The Power of Forgiveness",
                scripture: "Matthew 6:9-15",
                duration: "60-75 minutes",
                size: "6-15 people",
                description: "Understand God's forgiveness toward us and learn practical steps for forgiving others. Address the challenges and healing that comes through forgiveness."
            }
        };

        // Icebreaker Categories
        const icebreakerCategories = {
            gettingToKnow: [
                "Two Truths and a Lie - Share three statements about yourself, group guesses the lie",
                "Human Bingo - Find people who match various characteristics",
                "Name Tag Mixer - Write fun facts on name tags and guess whose is whose",
                "Desert Island - What three items would you bring to a desert island?",
                "Timeline of Life - Share significant moments from your life journey"
            ],
            conversation: [
                "If you could have dinner with anyone, living or dead, who would it be?",
                "What's the best advice you've ever received?",
                "If you could learn any skill instantly, what would it be?",
                "What's your favorite family tradition?",
                "What would your ideal day look like from start to finish?"
            ],
            activeGames: [
                "Human Knot - Stand in circle, grab hands, untangle without letting go",
                "Charades - Act out movies, books, or Bible stories",
                "Musical Chairs - With discussion questions at each chair",
                "Story Building - Each person adds one sentence to create a group story",
                "Scavenger Hunt - Find items around the room or building"
            ],
            creative: [
                "Draw Your Neighbor - Quick sketch portraits of each other",
                "Clay Sculptures - Create something representing your current season of life",
                "Poem Writing - Write acrostic poems using each other's names",
                "Vision Board - Create visual representations of hopes and dreams",
                "Storytelling Props - Use random objects to tell improvised stories"
            ],
            faithBased: [
                "Bible Character Identity - Guess which Bible character others are describing",
                "Psalm Writing - Create group psalm based on current experiences",
                "Prayer Walking - Walk and pray for specific needs or areas",
                "Testimony in 60 Seconds - Share brief personal faith moments",
                "Scripture Pictionary - Draw Bible verses for others to guess"
            ],
            quickEasy: [
                "One Word Check-in - Describe your week in one word",
                "High/Low - Share the high and low of your week",
                "Gratitude Circle - Each person shares one thing they're grateful for",
                "Word Association - Go around circle with connected words",
                "Question Ball - Toss ball with questions written on it"
            ]
        };

        // Initialize app
        function initializeApp() {
            loadAppData();
            updateDashboardStats();
        }

        // Enter app from welcome screen
        function enterApp() {
            document.getElementById('welcomeScreen').style.display = 'none';
            showScreen('homeScreen');
        }

        // Screen navigation with history
        function showScreen(screenId) {
            if (currentScreen !== screenId) {
                screenHistory.push(currentScreen);
                if (screenHistory.length > 10) {
                    screenHistory.shift();
                }
            }

            // Hide all screens
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => screen.classList.remove('active'));
            
            // Show target screen
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
            
            // Update navigation
            updateNavigation(screenId);
            updateBackButton(screenId);
        }

        function goBack() {
            if (screenHistory.length > 0) {
                const previousScreen = screenHistory.pop();
                showScreen(previousScreen);
            } else {
                showScreen('homeScreen');
            }
        }

        function updateBackButton(screenId) {
            const backButton = document.getElementById('backButton');
            if (screenId === 'homeScreen' || screenId === 'welcomeScreen') {
                backButton.classList.remove('show');
            } else {
                backButton.classList.add('show');
            }
        }

        function updateNavigation(activeScreen) {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            // Map screen to nav item
            const navMap = {
                'homeScreen': 0,
                'crisisScreen': 1,
                'resourcesScreen': 2
            };
            
            if (navMap[activeScreen] !== undefined) {
                navItems[navMap[activeScreen]].classList.add('active');
            }
        }

        // Modal functions
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Audio controls
        let audioPlaying = false;
        function toggleAudio() {
            const audio = document.getElementById('backgroundAudio');
            const button = document.getElementById('audioToggle');
            
            if (audioPlaying) {
                audio.pause();
                button.textContent = '🔇';
                audioPlaying = false;
            } else {
                audio.play();
                button.textContent = '🎵';
                audioPlaying = true;
            }
        }

        // Lesson Functions
        function openLesson(lessonKey) {
            const lesson = lessonPlans[lessonKey];
            if (lesson) {
                document.getElementById('detailTitle').textContent = lesson.title;
                document.getElementById('detailDescription').textContent = lesson.description;
                document.getElementById('detailScripture').textContent = lesson.scripture;
                document.getElementById('detailDuration').textContent = lesson.duration;
                document.getElementById('detailSize').textContent = lesson.size;
                showScreen('lessonDetail');
            }
        }

        // Icebreaker Functions
        function showIcebreaker(category) {
            const activities = icebreakerCategories[category];
            let content = `<h3>${category.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())} Activities</h3>`;
            
            activities.forEach((activity, index) => {
                content += `<div style="margin: 20px 0; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #16a085;">
                    <div style="font-weight: 600; color: #2c3e50; margin-bottom: 10px;">${index + 1}. ${activity.split(' - ')[0]}</div>
                    <div style="color: #7f8c8d;">${activity.split(' - ')[1] || ''}</div>
                </div>`;
            });
            
            showGenericModal('Icebreaker Activities', content);
        }

        // Prayer Functions
        function addPrayerRequest() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h3>Add Prayer Request</h3>
                    <div class="form-group">
                        <label class="form-label">Person</label>
                        <input type="text" class="form-input" id="prayerPerson" placeholder="Enter name">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Prayer Request</label>
                        <textarea class="form-textarea" id="prayerRequest" placeholder="Enter prayer request"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="savePrayerRequest()">Add Request</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function savePrayerRequest() {
            const person = document.getElementById('prayerPerson').value;
            const request = document.getElementById('prayerRequest').value;
            
            if (person && request) {
                const newPrayer = {
                    id: 'prayer' + Date.now(),
                    date: new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),
                    person: person,
                    request: request,
                    status: 'ongoing'
                };
                
                appData.prayerList.push(newPrayer);
                appData.prayerRequests++;
                saveAppData();
                updateDashboardStats();
                
                // Close modal
                document.querySelector('.modal').remove();
                
                showSuccessMessage('Prayer request added successfully!');
            }
        }

        function markAnswered(prayerId) {
            const prayer = appData.prayerList.find(p => p.id === prayerId);
            if (prayer) {
                prayer.status = 'answered';
                saveAppData();
                showSuccessMessage('Prayer marked as answered! Praise God!');
            }
        }

        // Accountability Functions
        function setGroupGoal() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h3>Set Group Goal</h3>
                    <div class="form-group">
                        <label class="form-label">Goal Title</label>
                        <input type="text" class="form-input" id="goalTitle" placeholder="Enter goal title">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea class="form-textarea" id="goalDescription" placeholder="Describe the goal and expectations"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Target Completion</label>
                        <input type="date" class="form-input" id="goalDate">
                    </div>
                    <button class="btn btn-primary" onclick="saveGroupGoal()">Set Goal</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function saveGroupGoal() {
            const title = document.getElementById('goalTitle').value;
            const description = document.getElementById('goalDescription').value;
            
            if (title && description) {
                const newGoal = {
                    id: 'goal' + Date.now(),
                    title: title,
                    description: description,
                    progress: 0
                };
                
                appData.groupGoals.push(newGoal);
                saveAppData();
                
                // Close modal
                document.querySelector('.modal').remove();
                
                showSuccessMessage('Group goal set successfully!');
            }
        }

        function updateProgress(goalId) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h3>Update Progress</h3>
                    <div class="form-group">
                        <label class="form-label">Progress Percentage</label>
                        <input type="number" class="form-input" id="progressValue" min="0" max="100" placeholder="Enter percentage (0-100)">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Notes</label>
                        <textarea class="form-textarea" id="progressNotes" placeholder="Any updates or observations"></textarea>
                    </div>
                    <button class="btn btn-primary" onclick="saveProgress('${goalId}')">Update Progress</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function saveProgress(goalId) {
            const progress = document.getElementById('progressValue').value;
            const goal = appData.groupGoals.find(g => g.id === goalId);
            
            if (goal && progress) {
                goal.progress = parseInt(progress);
                saveAppData();
                
                // Close modal
                document.querySelector('.modal').remove();
                
                showSuccessMessage('Progress updated successfully!');
            }
        }

        function scheduleCheckIn(member) {
            showSuccessMessage(`Check-in scheduled with ${member}!`);
        }

        // Tips and Resources Functions
        function showTips(category) {
            const tips = {
                gettingStarted: [
                    "Start with prayer and ask God for wisdom and guidance",
                    "Meet with each potential member individually before the first group meeting",
                    "Set clear expectations about attendance, participation, and group covenant",
                    "Choose a consistent meeting time and location",
                    "Prepare thoroughly but hold your plans loosely",
                    "Create a welcoming environment with comfortable seating and refreshments"
                ],
                facilitating: [
                    "Ask open-ended questions that encourage discussion",
                    "Give everyone a chance to participate but don't force it",
                    "Listen more than you talk - aim for 70/30 ratio",
                    "Affirm people's contributions and thank them for sharing",
                    "Keep discussions on track but allow for meaningful rabbit trails",
                    "Address difficult topics with grace and biblical wisdom"
                ],
                community: [
                    "Model vulnerability by sharing your own struggles and growth",
                    "Encourage members to connect outside of group meetings",
                    "Celebrate birthdays, anniversaries, and special occasions",
                    "Create opportunities for serving together",
                    "Remember and follow up on prayer requests",
                    "Foster an environment where people feel safe to be authentic"
                ]
            };
            
            const categoryTips = tips[category] || [];
            let content = `<h3>${category.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}</h3>`;
            
            categoryTips.forEach((tip, index) => {
                content += `<div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #16a085;">
                    <div style="color: #2c3e50; line-height: 1.6;">${index + 1}. ${tip}</div>
                </div>`;
            });
            
            showGenericModal('Leadership Tips', content);
        }

        function showCrisisHelp(type) {
            const help = {
                overwhelmed: "Remember that God has called you to this role and He will equip you. Take time for personal prayer and rest. Consider delegating responsibilities and seeking help from other leaders.",
                inadequate: "Every leader feels inadequate at times. This keeps us dependent on God's strength rather than our own abilities. Focus on your calling and trust that God will work through your weakness.",
                dynamics: "Difficult group dynamics are common. Address issues directly but with love. Sometimes one-on-one conversations are needed. Don't hesitate to seek advice from experienced leaders.",
                wisdom: "God promises to give wisdom generously to those who ask. Spend time in prayer and Scripture. Seek counsel from mentors and experienced leaders in your church."
            };
            
            const helpText = help[type] || "Seek support from your church leadership team and remember that God is with you in this journey.";
            showGenericModal('Crisis Support', `<p style="line-height: 1.6; color: #2c3e50;">${helpText}</p>`);
        }

        function showResource(resourceType) {
            if (resourceType === 'questionBank') {
                openQuestionBank();
            } else if (resourceType === 'covenant') {
                openCovenantTemplate();
            } else if (resourceType === 'firstMeeting') {
                openFirstMeetingChecklist();
            }
        }

        function openQuestionBank() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 800px;">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">📝 Discussion Question Bank</h2>
                    
                    <div style="display: flex; gap: 15px; margin-bottom: 25px; flex-wrap: wrap;">
                        <button class="btn btn-secondary btn-small" onclick="showQuestionCategory('opening')">Opening Questions</button>
                        <button class="btn btn-secondary btn-small" onclick="showQuestionCategory('observation')">Observation</button>
                        <button class="btn btn-secondary btn-small" onclick="showQuestionCategory('interpretation')">Interpretation</button>
                        <button class="btn btn-secondary btn-small" onclick="showQuestionCategory('application')">Application</button>
                        <button class="btn btn-secondary btn-small" onclick="showQuestionCategory('personal')">Personal</button>
                        <button class="btn btn-secondary btn-small" onclick="showQuestionCategory('action')">Action</button>
                    </div>
                    
                    <div id="questionContent">
                        <div class="section">
                            <div class="section-header">How to Use These Questions</div>
                            <div class="section-content">
                                <ul style="line-height: 1.8; color: #2c3e50;">
                                    <li><strong>Opening Questions:</strong> Break the ice and get people talking</li>
                                    <li><strong>Observation Questions:</strong> What does the text actually say?</li>
                                    <li><strong>Interpretation Questions:</strong> What does the text mean?</li>
                                    <li><strong>Application Questions:</strong> How does this apply to our lives?</li>
                                    <li><strong>Personal Questions:</strong> Connect to individual experiences</li>
                                    <li><strong>Action Questions:</strong> What will we do in response?</li>
                                </ul>
                                <p style="color: #7f8c8d; margin-top: 15px; font-style: italic;">
                                    Click any category above to see specific questions you can use in your group discussions.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showQuestionCategory(category) {
            const questions = {
                opening: [
                    "If you could have any superpower for a day, what would it be and why?",
                    "What's the best piece of advice you've ever received?",
                    "If you could have dinner with anyone in history, who would it be?",
                    "What's one thing from your childhood that you miss?",
                    "If you won the lottery tomorrow, what's the first thing you'd do?",
                    "What's your favorite family tradition?",
                    "If you could learn any skill instantly, what would it be?",
                    "What's the most adventurous thing you've ever done?",
                    "If you could time travel, would you go to the past or future?",
                    "What's one thing you're really grateful for right now?",
                    "If you had to describe yourself in three words, what would they be?",
                    "What's the best compliment you've ever received?",
                    "If you could visit any place in the world, where would you go?",
                    "What's something new you've learned recently?",
                    "If you could have any job for a week, what would it be?"
                ],
                observation: [
                    "What stands out to you most in this passage?",
                    "What words or phrases are repeated?",
                    "Who are the main characters mentioned?",
                    "What actions take place in this text?",
                    "What emotions do you notice in the passage?",
                    "What questions does this passage raise for you?",
                    "What surprises you in this text?",
                    "What seems to be the main point of this passage?",
                    "What context clues help us understand the situation?",
                    "What contrasts or comparisons do you see?",
                    "What commands or instructions are given?",
                    "What promises are mentioned?",
                    "What geographical or historical details are included?",
                    "What time indicators are present (before, after, then, etc.)?",
                    "What connecting words show relationships between ideas?"
                ],
                interpretation: [
                    "What do you think the author's main message is?",
                    "Why do you think this was important to the original audience?",
                    "How does this passage connect to the larger story of the Bible?",
                    "What does this teach us about God's character?",
                    "What does this reveal about human nature?",
                    "How might the original readers have responded to this message?",
                    "What theological principles can we draw from this text?",
                    "How does this passage relate to other parts of Scripture?",
                    "What would have been shocking or surprising about this message?",
                    "What cultural background helps us understand this passage?",
                    "What is the tone or mood of this passage?",
                    "What literary devices (metaphors, parables, etc.) are used?",
                    "How does the historical context shape the meaning?",
                    "What was the author trying to accomplish with this message?",
                    "What assumptions did the original audience likely have?"
                ],
                application: [
                    "How does this passage apply to our lives today?",
                    "What changes might God be calling us to make?",
                    "How can we live out this truth in practical ways?",
                    "What obstacles might prevent us from applying this?",
                    "How does this challenge your current thinking or behavior?",
                    "What would your life look like if you fully embraced this truth?",
                    "How can we encourage each other to live this out?",
                    "What specific steps can we take this week?",
                    "How does this passage speak to current issues in our culture?",
                    "What fears or concerns does this application raise?",
                    "How might this truth change your relationships?",
                    "What prayers does this passage inspire?",
                    "How can we hold each other accountable to these principles?",
                    "What would be the cost of not applying this truth?",
                    "How does this passage give hope in difficult circumstances?"
                ],
                personal: [
                    "Can you relate to any character in this story? How?",
                    "When have you experienced something similar in your life?",
                    "What emotions does this passage stir up for you?",
                    "How has God shown you this truth in your own experience?",
                    "What personal struggles does this address?",
                    "When have you seen God work in a similar way in your life?",
                    "What hopes or dreams does this passage speak to?",
                    "How does your personal story connect with this text?",
                    "What questions about life does this passage answer for you?",
                    "When have you failed to live up to this standard?",
                    "How has your understanding of this truth grown over time?",
                    "What personal testimony could you share related to this passage?",
                    "How does this passage comfort you in your current circumstances?",
                    "What personal growth area does this highlight?",
                    "How does this passage challenge your priorities?"
                ],
                action: [
                    "What is one specific thing you will do differently this week?",
                    "How can we pray for each other based on this passage?",
                    "What practical steps will help you remember this truth?",
                    "Who needs to hear this message from you?",
                    "What habits might you need to change?",
                    "How can we serve others based on what we've learned?",
                    "What conversations do you need to have because of this passage?",
                    "What relationships need attention in light of this truth?",
                    "How will you share this truth with someone outside our group?",
                    "What commitment are you willing to make right now?",
                    "How can we support each other in living this out?",
                    "What resources do you need to apply this effectively?",
                    "What obstacles will you need to overcome?",
                    "How will you measure growth in this area?",
                    "What accountability do you need from the group?"
                ]
            };

            const categoryQuestions = questions[category] || [];
            const categoryTitle = category.charAt(0).toUpperCase() + category.slice(1) + ' Questions';
            
            let content = `
                <div class="section">
                    <div class="section-header">${categoryTitle}</div>
                    <div class="section-content">
                        <div style="display: grid; gap: 15px;">
            `;
            
            categoryQuestions.forEach((question, index) => {
                content += `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #16a085;">
                        <div style="font-weight: 600; color: #16a085; margin-bottom: 5px;">${index + 1}.</div>
                        <div style="color: #2c3e50; line-height: 1.6;">${question}</div>
                    </div>
                `;
            });
            
            content += `
                        </div>
                        <div style="margin-top: 20px; padding: 15px; background: #e8f5e8; border-radius: 8px;">
                            <strong style="color: #27ae60;">💡 Pro Tip:</strong>
                            <span style="color: #2c3e50;"> Choose 2-3 questions that fit your group's needs rather than trying to use them all.</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('questionContent').innerHTML = content;
        }

        function openCovenantTemplate() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 700px;">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">📋 Group Covenant Template</h2>
                    
                    <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin-bottom: 25px;">
                        <h4 style="color: #27ae60; margin-bottom: 10px;">How to Use This Template:</h4>
                        <ul style="color: #2c3e50; line-height: 1.6; margin-left: 20px;">
                            <li>Review each section with your group during your first meeting</li>
                            <li>Customize the specifics to fit your group's needs</li>
                            <li>Have everyone agree and sign the covenant</li>
                            <li>Refer back to it when issues arise</li>
                        </ul>
                    </div>
                    
                    <div class="section">
                        <div class="section-header">Our Group Covenant</div>
                        <div class="section-content" style="background: #f8f9fa; padding: 20px; border-radius: 8px; line-height: 1.8;">
                            <h4 style="color: #16a085; margin-bottom: 15px;">1. Attendance Expectations</h4>
                            <p style="margin-bottom: 15px;">We commit to:</p>
                            <ul style="margin-left: 20px; margin-bottom: 20px;">
                                <li>Prioritizing group meetings in our schedules</li>
                                <li>Arriving on time and staying for the full session</li>
                                <li>Notifying the leader if we must miss a meeting</li>
                                <li>Making up for missed content when possible</li>
                                <li>Understanding that consistent attendance builds community</li>
                            </ul>
                            
                            <h4 style="color: #16a085; margin-bottom: 15px;">2. Confidentiality Agreement</h4>
                            <p style="margin-bottom: 15px;">We agree to:</p>
                            <ul style="margin-left: 20px; margin-bottom: 20px;">
                                <li>Keep personal sharing within the group</li>
                                <li>Not discuss other members' stories outside the group</li>
                                <li>Ask permission before sharing prayer requests with others</li>
                                <li>Create a safe space for vulnerability and authenticity</li>
                                <li>Respect privacy and build trust through confidentiality</li>
                            </ul>
                            
                            <h4 style="color: #16a085; margin-bottom: 15px;">3. Participation Guidelines</h4>
                            <p style="margin-bottom: 15px;">We commit to:</p>
                            <ul style="margin-left: 20px; margin-bottom: 20px;">
                                <li>Participating actively in discussions and activities</li>
                                <li>Listening respectfully when others are sharing</li>
                                <li>Speaking up while not dominating conversations</li>
                                <li>Preparing for meetings when study is assigned</li>
                                <li>Encouraging others to participate and share</li>
                            </ul>
                            
                            <h4 style="color: #16a085; margin-bottom: 15px;">4. Communication Preferences</h4>
                            <p style="margin-bottom: 15px;">We agree to:</p>
                            <ul style="margin-left: 20px; margin-bottom: 20px;">
                                <li>Communicate openly and honestly with love</li>
                                <li>Address concerns directly rather than gossiping</li>
                                <li>Use [preferred method: text/email/phone] for group communication</li>
                                <li>Respond to group messages within [timeframe]</li>
                                <li>Speak truth in love and receive feedback gracefully</li>
                            </ul>
                            
                            <h4 style="color: #16a085; margin-bottom: 15px;">5. Conflict Resolution Process</h4>
                            <p style="margin-bottom: 15px;">When conflicts arise, we will:</p>
                            <ul style="margin-left: 20px; margin-bottom: 20px;">
                                <li>Follow Jesus' teaching in Matthew 18:15-17</li>
                                <li>Address issues privately first, then with witnesses</li>
                                <li>Seek understanding before trying to be understood</li>
                                <li>Involve the group leader for mediation when needed</li>
                                <li>Prioritize reconciliation and group unity</li>
                            </ul>
                            
                            <h4 style="color: #16a085; margin-bottom: 15px;">6. Group Goals and Commitments</h4>
                            <p style="margin-bottom: 15px;">Together we commit to:</p>
                            <ul style="margin-left: 20px; margin-bottom: 20px;">
                                <li>Growing in our relationship with God</li>
                                <li>Building authentic community with each other</li>
                                <li>Supporting one another through life's challenges</li>
                                <li>Praying for each other regularly</li>
                                <li>Seeking opportunities to serve together</li>
                                <li>[Add specific goals for your group]</li>
                            </ul>
                            
                            <div style="margin-top: 30px; padding: 20px; background: white; border-radius: 8px; border: 2px dashed #16a085;">
                                <h4 style="color: #16a085; margin-bottom: 15px;">Group Member Signatures:</h4>
                                <p style="color: #7f8c8d; margin-bottom: 15px;">By signing below, I agree to honor this covenant and help create a healthy group environment.</p>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                                    <div>Name: ___________________ Date: ______</div>
                                    <div>Name: ___________________ Date: ______</div>
                                    <div>Name: ___________________ Date: ______</div>
                                    <div>Name: ___________________ Date: ______</div>
                                    <div>Name: ___________________ Date: ______</div>
                                    <div>Name: ___________________ Date: ______</div>
                                    <div>Name: ___________________ Date: ______</div>
                                    <div>Name: ___________________ Date: ______</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 25px;">
                        <button class="btn btn-primary" onclick="downloadCovenant()">Download Template</button>
                        <button class="btn btn-secondary" onclick="customizeCovenant()">Customize for My Group</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function openFirstMeetingChecklist() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">✅ First Meeting Checklist</h2>
                    
                    <div class="section">
                        <div class="section-header">Before the Meeting (1 Week Prior)</div>
                        <div class="section-content">
                            <ul class="checklist">
                                <li>Confirm meeting location, date, and time with all members</li>
                                <li>Send welcome message with basic logistics</li>
                                <li>Prepare name tags and markers</li>
                                <li>Plan seating arrangement (circle or around table)</li>
                                <li>Gather enough Bibles for anyone who needs one</li>
                                <li>Print group covenant template</li>
                                <li>Prepare simple refreshments (optional but welcoming)</li>
                                <li>Plan your icebreaker activity</li>
                                <li>Prepare introduction of yourself and your story</li>
                                <li>Create contact information sheet for group</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-header">Meeting Day Setup (30 min before)</div>
                        <div class="section-content">
                            <ul class="checklist">
                                <li>Arrange chairs in circle for conversation</li>
                                <li>Set out name tags and pens at entrance</li>
                                <li>Place Bibles and notebooks on tables/chairs</li>
                                <li>Set up refreshment area if applicable</li>
                                <li>Test any technology (music, video, etc.)</li>
                                <li>Put covenant templates at each seat</li>
                                <li>Have contact sheet ready to pass around</li>
                                <li>Prepare atmosphere (lighting, music)</li>
                                <li>Pray for the meeting and each person attending</li>
                                <li>Review your agenda and timing</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-header">During the Meeting (Suggested 90 min)</div>
                        <div class="section-content">
                            <div class="timeline">
                                <div class="timeline-item">
                                    <div class="timeline-time">5 min</div>
                                    <div class="timeline-content"><strong>Welcome & Introductions</strong><br>Greet everyone, help with name tags, basic introductions</div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">15 min</div>
                                    <div class="timeline-content"><strong>Icebreaker Activity</strong><br>Fun way to start conversations and reduce nervousness</div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">10 min</div>
                                    <div class="timeline-content"><strong>Leader's Story</strong><br>Share your faith journey and why you're leading</div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">20 min</div>
                                    <div class="timeline-content"><strong>Group Expectations</strong><br>Review and discuss group covenant together</div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">20 min</div>
                                    <div class="timeline-content"><strong>Everyone's Story</strong><br>Each person shares briefly about themselves</div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">10 min</div>
                                    <div class="timeline-content"><strong>Contact Exchange</strong><br>Collect contact information and preferred communication</div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">5 min</div>
                                    <div class="timeline-content"><strong>Next Steps</strong><br>Confirm next meeting and any preparation needed</div>
                                </div>
                                <div class="timeline-item">
                                    <div class="timeline-time">5 min</div>
                                    <div class="timeline-content"><strong>Closing Prayer</strong><br>Brief prayer for the group and upcoming journey</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-header">After the Meeting (Within 24 hours)</div>
                        <div class="section-content">
                            <ul class="checklist">
                                <li>Send thank you message to all attendees</li>
                                <li>Share contact list with the group</li>
                                <li>Send reminder about next meeting details</li>
                                <li>Follow up personally with anyone who seemed hesitant</li>
                                <li>Begin praying for each group member by name</li>
                                <li>Start planning your second meeting content</li>
                                <li>Reflect on what went well and what to improve</li>
                                <li>Update your group roster with any changes</li>
                                <li>Note any special needs or prayer requests shared</li>
                                <li>Celebrate - you did it! Your group has officially begun!</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function downloadCovenant() {
            showSuccessMessage('📄 Covenant template ready! Copy the content and paste into a document for printing.');
        }

        function customizeCovenant() {
            showSuccessMessage('✏️ Great idea! Modify the template to fit your specific group needs and culture.');
        }

        function openHelpCenter() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">🆘 Leadership Help Center</h2>
                    
                    <div class="section">
                        <div class="section-header">Immediate Crisis Support</div>
                        <div class="section-content">
                            <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 15px; border-left: 4px solid #f39c12;">
                                <strong>🚨 If you're facing a leadership crisis right now:</strong><br>
                                <span style="color: #7f8c8d;">• Contact your senior pastor immediately<br>
                                • Call your church's crisis helpline if available<br>
                                • Reach out to an experienced leader you trust</span>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Common Leadership Challenges & Solutions</div>
                        <div class="section-content">
                            <div class="resource-grid">
                                <div class="resource-card" onclick="showHelpTopic('difficult-member')">
                                    <div class="resource-title">Difficult Group Member</div>
                                    <div class="resource-description">Someone dominates, complains, or disrupts the group</div>
                                </div>
                                <div class="resource-card" onclick="showHelpTopic('low-attendance')">
                                    <div class="resource-title">Low Attendance</div>
                                    <div class="resource-description">People keep missing or dropping out</div>
                                </div>
                                <div class="resource-card" onclick="showHelpTopic('shallow-discussion')">
                                    <div class="resource-title">Shallow Discussions</div>
                                    <div class="resource-description">Group won't go deeper or share authentically</div>
                                </div>
                                <div class="resource-card" onclick="showHelpTopic('conflict-resolution')">
                                    <div class="resource-title">Group Conflict</div>
                                    <div class="resource-description">Disagreements or tension between members</div>
                                </div>
                                <div class="resource-card" onclick="showHelpTopic('leader-burnout')">
                                    <div class="resource-title">Leader Burnout</div>
                                    <div class="resource-description">Feeling overwhelmed or inadequate as leader</div>
                                </div>
                                <div class="resource-card" onclick="showHelpTopic('spiritual-dryness')">
                                    <div class="resource-title">Spiritual Dryness</div>
                                    <div class="resource-description">Group feels disconnected from God</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Self-Assessment Tools</div>
                        <div class="section-content">
                            <button class="btn btn-primary btn-small" onclick="startLeadershipAssessment()" style="margin-right: 10px;">Leadership Strengths Assessment</button>
                            <button class="btn btn-secondary btn-small" onclick="startGroupHealthCheck()">Group Health Checker</button>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Resource Library</div>
                        <div class="section-content">
                            <ul style="line-height: 1.8; color: #2c3e50;">
                                <li><strong>Emergency Contact Scripts:</strong> What to say when calling for help</li>
                                <li><strong>Conflict De-escalation Guide:</strong> Step-by-step crisis management</li>
                                <li><strong>Prayer Points for Leaders:</strong> Spiritual support when struggling</li>
                                <li><strong>Leadership Recovery Plan:</strong> Bouncing back from difficult situations</li>
                                <li><strong>Wisdom from Experienced Leaders:</strong> Real stories and lessons learned</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function openMentorGuide() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">🤝 Mentor Matching Guide</h2>
                    
                    <div class="section">
                        <div class="section-header">Finding Your Ideal Mentor</div>
                        <div class="section-content">
                            <h4 style="color: #16a085; margin-bottom: 15px;">What to Look for in a Mentor:</h4>
                            <ul class="checklist">
                                <li>Successfully led small groups for 2+ years</li>
                                <li>Demonstrates spiritual maturity and wisdom</li>
                                <li>Available for regular check-ins and support</li>
                                <li>Has experienced similar challenges you're facing</li>
                                <li>Committed to your growth and development</li>
                                <li>Aligned with your church's vision and values</li>
                            </ul>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Where to Find Mentors</div>
                        <div class="section-content">
                            <div class="resource-grid">
                                <div class="resource-card">
                                    <div class="resource-title">Your Church</div>
                                    <div class="resource-description">Ask pastoral staff for recommendations of experienced small group leaders</div>
                                </div>
                                <div class="resource-card">
                                    <div class="resource-title">Small Group Network</div>
                                    <div class="resource-description">Connect with other leaders in your church's small group ministry</div>
                                </div>
                                <div class="resource-card">
                                    <div class="resource-title">Leadership Teams</div>
                                    <div class="resource-description">Reach out to deacons, elders, or ministry leaders</div>
                                </div>
                                <div class="resource-card">
                                    <div class="resource-title">Regional Networks</div>
                                    <div class="resource-description">Connect through denominational or regional leadership groups</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Self-Preparation Checklist</div>
                        <div class="section-content">
                            <h4 style="color: #16a085; margin-bottom: 15px;">Before Approaching a Potential Mentor:</h4>
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                    <input type="checkbox" id="prep-goals"> Define your specific learning goals
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                    <input type="checkbox" id="prep-commitment"> Determine your availability for meetings
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                    <input type="checkbox" id="prep-challenges"> Identify your current leadership challenges
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                    <input type="checkbox" id="prep-questions"> Prepare specific questions to ask them
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">
                                    <input type="checkbox" id="prep-expectations"> Set realistic expectations for the relationship
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Conversation Starter Template</div>
                        <div class="section-content">
                            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 4px solid #16a085;">
                                <h4 style="color: #16a085; margin-bottom: 15px;">What to Say:</h4>
                                <p style="font-style: italic; line-height: 1.6; color: #2c3e50;">
                                    "Hi [Name], I really admire your leadership and the way you've built community in your small group. 
                                    I'm a new small group leader and would love to learn from your experience. Would you be open to 
                                    meeting monthly for coffee to help me grow as a leader? I'm specifically hoping to improve in 
                                    [specific area] and would value your insights and guidance."
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-header">Personal Mentor Action Plan</div>
                        <div class="section-content">
                            <button class="btn btn-primary" onclick="createMentorPlan()">Create My Mentor Search Plan</button>
                            <p style="color: #7f8c8d; margin-top: 10px;">Generate a personalized action plan for finding and approaching potential mentors</p>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showHelpTopic(topic) {
            const topics = {
                'difficult-member': {
                    title: 'Handling Difficult Group Members',
                    content: `
                        <h4>Step-by-Step Action Plan:</h4>
                        <ol style="line-height: 1.8; color: #2c3e50;">
                            <li><strong>Assess the Situation:</strong> Is it disruptive behavior, dominating conversation, or personal conflicts?</li>
                            <li><strong>One-on-One Conversation:</strong> Meet privately to address concerns with love and clarity</li>
                            <li><strong>Set Clear Boundaries:</strong> Establish group norms and expectations respectfully</li>
                            <li><strong>Redirect in Group:</strong> Use phrases like "Thanks John, let's hear from someone else"</li>
                            <li><strong>Involve Leadership:</strong> If behavior continues, consult with pastoral staff</li>
                            <li><strong>Make Difficult Decisions:</strong> Sometimes removal from group is necessary for group health</li>
                        </ol>
                        
                        <h4 style="margin-top: 20px;">Scripts to Use:</h4>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <strong>For Dominators:</strong> "I appreciate your enthusiasm. Let's make sure everyone gets a chance to share."
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <strong>For Negative Attitudes:</strong> "I understand you're frustrated. How can we pray for you and support you through this?"
                        </div>
                    `
                },
                'low-attendance': {
                    title: 'Improving Group Attendance',
                    content: `
                        <h4>Diagnostic Questions:</h4>
                        <ul style="line-height: 1.8; color: #2c3e50;">
                            <li>Is the meeting time convenient for most members?</li>
                            <li>Are discussions engaging and relevant?</li>
                            <li>Do people feel connected to each other?</li>
                            <li>Is the location comfortable and accessible?</li>
                            <li>Are there competing priorities or activities?</li>
                        </ul>
                        
                        <h4>Action Steps:</h4>
                        <ol style="line-height: 1.8; color: #2c3e50;">
                            <li><strong>Survey Your Group:</strong> Ask directly what would improve attendance</li>
                            <li><strong>Adjust Meeting Format:</strong> Mix up locations, times, or activities</li>
                            <li><strong>Personal Follow-up:</strong> Call or text members who miss regularly</li>
                            <li><strong>Create Accountability:</strong> Partner system where members check on each other</li>
                            <li><strong>Plan Special Events:</strong> Social gatherings to rebuild connections</li>
                            <li><strong>Evaluate Group Health:</strong> May need to restart with committed core</li>
                        </ol>
                    `
                },
                'shallow-discussion': {
                    title: 'Encouraging Deeper Sharing',
                    content: `
                        <h4>Root Causes:</h4>
                        <ul style="line-height: 1.8; color: #2c3e50;">
                            <li>Lack of trust and safety in the group</li>
                            <li>Fear of judgment or criticism</li>
                            <li>Surface-level questions that don't invite depth</li>
                            <li>Leader not modeling vulnerability</li>
                            <li>Group hasn't established authentic culture</li>
                        </ul>
                        
                        <h4>Solutions:</h4>
                        <ol style="line-height: 1.8; color: #2c3e50;">
                            <li><strong>Model Vulnerability:</strong> Share your own struggles and growth areas first</li>
                            <li><strong>Ask Better Questions:</strong> Move from "What do you think?" to "How have you experienced this?"</li>
                            <li><strong>Create Safe Spaces:</strong> Emphasize confidentiality and grace</li>
                            <li><strong>Use Smaller Groups:</strong> Break into pairs or triads for deeper sharing</li>
                            <li><strong>Share Stories:</strong> Tell personal examples to encourage others</li>
                            <li><strong>Be Patient:</strong> Authentic community takes time to develop</li>
                        </ol>
                    `
                }
            };
            
            const topicData = topics[topic];
            if (topicData) {
                showGenericModal(topicData.title, topicData.content);
            }
        }

        function startLeadershipAssessment() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">📊 Leadership Strengths Assessment</h2>
                    
                    <p style="color: #7f8c8d; margin-bottom: 25px;">Rate yourself honestly in each area (1=Needs Work, 5=Strong)</p>
                    
                    <div class="assessment-grid" style="display: grid; gap: 20px;">
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Facilitation Skills</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="assessment-facilitation" style="flex: 1;">
                                <span>5</span>
                                <span id="facilitation-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                        
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Building Community</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="assessment-community" style="flex: 1;">
                                <span>5</span>
                                <span id="community-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                        
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Biblical Teaching</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="assessment-teaching" style="flex: 1;">
                                <span>5</span>
                                <span id="teaching-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                        
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Pastoral Care</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="assessment-pastoral" style="flex: 1;">
                                <span>5</span>
                                <span id="pastoral-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                        
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Conflict Resolution</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="assessment-conflict" style="flex: 1;">
                                <span>5</span>
                                <span id="conflict-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="generateAssessmentResults()" style="margin-top: 25px;">Get My Results & Development Plan</button>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Add real-time value updates
            ['facilitation', 'community', 'teaching', 'pastoral', 'conflict'].forEach(area => {
                const slider = document.getElementById(`assessment-${area}`);
                const display = document.getElementById(`${area}-value`);
                slider.addEventListener('input', function() {
                    display.textContent = this.value;
                });
            });
        }

        function generateAssessmentResults() {
            const scores = {
                facilitation: parseInt(document.getElementById('assessment-facilitation').value),
                community: parseInt(document.getElementById('assessment-community').value),
                teaching: parseInt(document.getElementById('assessment-teaching').value),
                pastoral: parseInt(document.getElementById('assessment-pastoral').value),
                conflict: parseInt(document.getElementById('assessment-conflict').value)
            };
            
            const total = Object.values(scores).reduce((a, b) => a + b, 0);
            const average = (total / 5).toFixed(1);
            
            // Find strengths (4-5) and growth areas (1-3)
            const strengths = Object.entries(scores).filter(([key, value]) => value >= 4);
            const growthAreas = Object.entries(scores).filter(([key, value]) => value <= 3);
            
            document.querySelector('.modal').remove();
            
            const resultsModal = document.createElement('div');
            resultsModal.className = 'modal active';
            resultsModal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">📊 Your Leadership Assessment Results</h2>
                    
                    <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center;">
                        <h3 style="color: #27ae60; margin-bottom: 10px;">Overall Leadership Score</h3>
                        <div style="font-size: 3em; font-weight: bold; color: #27ae60;">${average}/5</div>
                        <p style="color: #2c3e50;">${average >= 4 ? 'Strong Leader' : average >= 3 ? 'Developing Leader' : 'Growing Leader'}</p>
                    </div>
                    
                    <div class="section">
                        <div class="section-header">Your Leadership Strengths</div>
                        <div class="section-content">
                            ${strengths.length > 0 ? 
                                strengths.map(([area, score]) => `
                                    <div style="background: #d4edda; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #27ae60;">
                                        <strong>${area.charAt(0).toUpperCase() + area.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> ${score}/5 - Keep leveraging this strength!
                                    </div>
                                `).join('') : 
                                '<p style="color: #7f8c8d;">Keep developing! Every leader has room to grow.</p>'
                            }
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-header">Priority Growth Areas</div>
                        <div class="section-content">
                            ${growthAreas.map(([area, score]) => `
                                <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #f39c12;">
                                    <strong>${area.charAt(0).toUpperCase() + area.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> ${score}/5 - Focus here for maximum impact
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-header">Your Personalized Development Plan</div>
                        <div class="section-content">
                            <ol style="line-height: 1.8; color: #2c3e50;">
                                <li><strong>Next 30 Days:</strong> Choose your lowest-scoring area and focus on one specific improvement</li>
                                <li><strong>Find Resources:</strong> Use the Leadership Tips section for your priority growth areas</li>
                                <li><strong>Practice Regularly:</strong> Apply new skills in every group meeting</li>
                                <li><strong>Seek Feedback:</strong> Ask trusted group members for honest input</li>
                                <li><strong>Reassess Monthly:</strong> Retake this assessment to track progress</li>
                            </ol>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveAssessmentResults('${JSON.stringify(scores).replace(/'/g, "\\'")}')">Save My Results</button>
                </div>
            `;
            document.body.appendChild(resultsModal);
        }

        function saveAssessmentResults(scoresJson) {
            const scores = JSON.parse(scoresJson);
            const assessments = JSON.parse(localStorage.getItem('leadershipAssessments') || '[]');
            assessments.push({
                date: new Date().toLocaleDateString(),
                scores: scores,
                average: (Object.values(scores).reduce((a, b) => a + b, 0) / 5).toFixed(1)
            });
            localStorage.setItem('leadershipAssessments', JSON.stringify(assessments));
            
            document.querySelector('.modal').remove();
            showSuccessMessage('Assessment results saved! Track your progress over time.');
        }

        function createMentorPlan() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">🎯 My Mentor Search Action Plan</h2>
                    
                    <div class="form-group">
                        <label class="form-label">What are your top 3 leadership challenges right now?</label>
                        <textarea class="form-textarea" id="mentor-challenges" placeholder="Be specific about areas where you need guidance..." style="min-height: 80px;"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">List 3 potential mentors you know or could approach:</label>
                        <input type="text" class="form-input" id="mentor-1" placeholder="1. Name and why they'd be a good mentor" style="margin-bottom: 10px;">
                        <input type="text" class="form-input" id="mentor-2" placeholder="2. Name and why they'd be a good mentor" style="margin-bottom: 10px;">
                        <input type="text" class="form-input" id="mentor-3" placeholder="3. Name and why they'd be a good mentor">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">How often would you like to meet with a mentor?</label>
                        <select class="form-select" id="mentor-frequency">
                            <option value="weekly">Weekly (intensive growth period)</option>
                            <option value="biweekly">Every two weeks (balanced approach)</option>
                            <option value="monthly">Monthly (steady guidance)</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary" onclick="generateMentorPlan()">Generate My Action Plan</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function generateMentorPlan() {
            const challenges = document.getElementById('mentor-challenges').value;
            const mentors = [
                document.getElementById('mentor-1').value,
                document.getElementById('mentor-2').value,
                document.getElementById('mentor-3').value
            ].filter(m => m.trim());
            const frequency = document.getElementById('mentor-frequency').value;
            
            if (!challenges || mentors.length === 0) {
                showSuccessMessage('Please fill in your challenges and at least one potential mentor.');
                return;
            }
            
            document.querySelector('.modal').remove();
            
            const planModal = document.createElement('div');
            planModal.className = 'modal active';
            planModal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">📋 Your Personal Mentor Action Plan</h2>
                    
                    <div class="section">
                        <div class="section-header">Week 1: Preparation</div>
                        <div class="section-content">
                            <ul class="checklist">
                                <li>Review your leadership challenges and prepare specific questions</li>
                                <li>Research each potential mentor's background and leadership style</li>
                                <li>Practice your approach conversation (see template below)</li>
                                <li>Pray for wisdom in choosing the right mentor match</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-header">Week 2-3: Outreach</div>
                        <div class="section-content">
                            <h4 style="color: #16a085; margin-bottom: 15px;">Your Potential Mentors:</h4>
                            ${mentors.map((mentor, index) => `
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #16a085;">
                                    <strong>Option ${index + 1}:</strong> ${mentor}
                                    <br><small style="color: #7f8c8d;">Contact by: ${new Date(Date.now() + (index + 1) * 3 * 24 * 60 * 60 * 1000).toLocaleDateString()}</small>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-header">Your Approach Script</div>
                        <div class="section-content">
                            <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; border-left: 4px solid #27ae60;">
                                <p style="font-style: italic; line-height: 1.6; color: #2c3e50;">
                                    "Hi [Name], I've been watching your leadership and really admire how you [specific observation]. 
                                    I'm currently leading a small group and working through some challenges with [mention 1-2 specific areas from your list]. 
                                    Would you be open to meeting ${frequency === 'weekly' ? 'weekly' : frequency === 'biweekly' ? 'every two weeks' : 'monthly'} 
                                    for coffee to help me grow as a leader? I'd love to learn from your experience and wisdom."
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <div class="section-header">Week 4: Follow-up & First Meeting</div>
                        <div class="section-content">
                            <ul class="checklist">
                                <li>Schedule first mentoring session within 2 weeks</li>
                                <li>Prepare agenda with specific questions and situations</li>
                                <li>Bring notebook and be ready to take action on advice</li>
                                <li>Establish ongoing meeting schedule and communication preferences</li>
                            </ul>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveMentorPlan('${challenges.replace(/'/g, "\\'")}', '${JSON.stringify(mentors)}', '${frequency}')">Save My Action Plan</button>
                </div>
            `;
            document.body.appendChild(planModal);
        }

        function startGroupHealthCheck() {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">🩺 Group Health Assessment</h2>
                    
                    <p style="color: #7f8c8d; margin-bottom: 25px;">Rate your group's current health in each area (1=Poor, 5=Excellent)</p>
                    
                    <div class="assessment-grid" style="display: grid; gap: 20px;">
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Consistent Attendance</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="health-attendance" style="flex: 1;">
                                <span>5</span>
                                <span id="attendance-health-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                        
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Open & Authentic Sharing</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="health-sharing" style="flex: 1;">
                                <span>5</span>
                                <span id="sharing-health-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                        
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Prayer Life Together</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="health-prayer" style="flex: 1;">
                                <span>5</span>
                                <span id="prayer-health-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                        
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Care for One Another</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="health-care" style="flex: 1;">
                                <span>5</span>
                                <span id="care-health-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                        
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Spiritual Growth</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="health-growth" style="flex: 1;">
                                <span>5</span>
                                <span id="growth-health-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                        
                        <div class="assessment-item">
                            <label style="font-weight: 600; color: #2c3e50; margin-bottom: 10px; display: block;">Mission & Outreach</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <span>1</span>
                                <input type="range" min="1" max="5" value="3" id="health-mission" style="flex: 1;">
                                <span>5</span>
                                <span id="mission-health-value" style="margin-left: 10px; font-weight: bold; color: #16a085;">3</span>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="generateGroupHealthResults()" style="margin-top: 25px;">Get Group Health Report</button>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Add real-time value updates
            ['attendance', 'sharing', 'prayer', 'care', 'growth', 'mission'].forEach(area => {
                const slider = document.getElementById(`health-${area}`);
                const display = document.getElementById(`${area}-health-value`);
                slider.addEventListener('input', function() {
                    display.textContent = this.value;
                });
            });
        }

        function generateGroupHealthResults() {
            const scores = {
                attendance: parseInt(document.getElementById('health-attendance').value),
                sharing: parseInt(document.getElementById('health-sharing').value),
                prayer: parseInt(document.getElementById('health-prayer').value),
                care: parseInt(document.getElementById('health-care').value),
                growth: parseInt(document.getElementById('health-growth').value),
                mission: parseInt(document.getElementById('health-mission').value)
            };
            
            const total = Object.values(scores).reduce((a, b) => a + b, 0);
            const average = (total / 6).toFixed(1);
            
            // Categorize areas
            const strengths = Object.entries(scores).filter(([key, value]) => value >= 4);
            const concerns = Object.entries(scores).filter(([key, value]) => value <= 2);
            const improving = Object.entries(scores).filter(([key, value]) => value === 3);
            
            document.querySelector('.modal').remove();
            
            const resultsModal = document.createElement('div');
            resultsModal.className = 'modal active';
            resultsModal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">🩺 Group Health Report</h2>
                    
                    <div style="background: ${average >= 4 ? '#e8f5e8' : average >= 3 ? '#fff3cd' : '#f8d7da'}; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center;">
                        <h3 style="color: ${average >= 4 ? '#27ae60' : average >= 3 ? '#f39c12' : '#e74c3c'}; margin-bottom: 10px;">Overall Group Health</h3>
                        <div style="font-size: 3em; font-weight: bold; color: ${average >= 4 ? '#27ae60' : average >= 3 ? '#f39c12' : '#e74c3c'};">${average}/5</div>
                        <p style="color: #2c3e50;">${average >= 4 ? 'Thriving Group' : average >= 3 ? 'Healthy Group' : average >= 2 ? 'Struggling Group' : 'Crisis Group'}</p>
                    </div>
                    
                    ${strengths.length > 0 ? `
                        <div class="section">
                            <div class="section-header">Group Strengths</div>
                            <div class="section-content">
                                ${strengths.map(([area, score]) => `
                                    <div style="background: #d4edda; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #27ae60;">
                                        <strong>${area.charAt(0).toUpperCase() + area.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> ${score}/5 - Keep building on this strength!
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    ${concerns.length > 0 ? `
                        <div class="section">
                            <div class="section-header">Priority Areas for Improvement</div>
                            <div class="section-content">
                                ${concerns.map(([area, score]) => `
                                    <div style="background: #f8d7da; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #e74c3c;">
                                        <strong>${area.charAt(0).toUpperCase() + area.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> ${score}/5 - Needs immediate attention
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    ${improving.length > 0 ? `
                        <div class="section">
                            <div class="section-header">Areas to Develop</div>
                            <div class="section-content">
                                ${improving.map(([area, score]) => `
                                    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #f39c12;">
                                        <strong>${area.charAt(0).toUpperCase() + area.slice(1).replace(/([A-Z])/g, ' $1')}:</strong> ${score}/5 - Good foundation to build on
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="section">
                        <div class="section-header">Recommended Action Steps</div>
                        <div class="section-content">
                            <ol style="line-height: 1.8; color: #2c3e50;">
                                <li><strong>Focus on Priority Areas:</strong> Choose your lowest-scoring area for immediate attention</li>
                                <li><strong>Set Specific Goals:</strong> Create measurable improvements for the next 4-6 weeks</li>
                                <li><strong>Regular Check-ins:</strong> Assess group health monthly to track progress</li>
                                <li><strong>Get Outside Input:</strong> Ask group members for honest feedback</li>
                                <li><strong>Seek Help if Needed:</strong> Contact leadership team for areas scoring below 3</li>
                            </ol>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveGroupHealthResults('${JSON.stringify(scores).replace(/'/g, "\\'")}')">Save Health Report</button>
                </div>
            `;
            document.body.appendChild(resultsModal);
        }

        function saveGroupHealthResults(scoresJson) {
            const scores = JSON.parse(scoresJson);
            const healthReports = JSON.parse(localStorage.getItem('groupHealthReports') || '[]');
            healthReports.push({
                date: new Date().toLocaleDateString(),
                scores: scores,
                average: (Object.values(scores).reduce((a, b) => a + b, 0) / 6).toFixed(1)
            });
            localStorage.setItem('groupHealthReports', JSON.stringify(healthReports));
            
            document.querySelector('.modal').remove();
            showSuccessMessage('Group health report saved! Use this to track improvements over time.');
        }

        // Utility Functions
        function showGenericModal(title, content) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close" onclick="this.closest('.modal').remove()">×</button>
                    <h2 class="modal-title">${title}</h2>
                    <div class="modal-text">${content}</div>
                    <button class="btn btn-primary" onclick="this.closest('.modal').remove()">Close</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showSuccessMessage(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.textContent = message;
            
            document.body.appendChild(successDiv);
            
            // Trigger animation
            setTimeout(() => {
                successDiv.classList.add('show');
            }, 100);
            
            // Remove after 3 seconds
            setTimeout(() => {
                successDiv.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(successDiv);
                }, 300);
            }, 3000);
        }

        // Data persistence
        function saveAppData() {
            localStorage.setItem('smallGroupToolkitData', JSON.stringify(appData));
        }

        function loadAppData() {
            const saved = localStorage.getItem('smallGroupToolkitData');
            if (saved) {
                appData = { ...appData, ...JSON.parse(saved) };
            }
        }

        function updateDashboardStats() {
            document.getElementById('groupMembers').textContent = appData.groupMembers;
            document.getElementById('lessonsCompleted').textContent = appData.lessonsCompleted;
            document.getElementById('prayerRequests').textContent = appData.prayerRequests;
            document.getElementById('weeklyAttendance').textContent = appData.weeklyAttendance + '%';
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', initializeApp);

        // Close modals when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });
    </script>
</body>
</html>